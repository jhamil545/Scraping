<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">  
  <link rel="shortcut icon" href="./img/fav.png" type="image/x-icon">  
  <link rel="stylesheet" href="https://kit-pro.fontawesome.com/releases/v5.12.1/css/pro.min.css">
  <link rel="stylesheet" type="text/css" href="${static_url('dashboard/css/style.css')}">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <title>Welcome To Cleopatra</title>
</head>
<body class="bg-gray-100">


<!-- start navbar -->
<div class="md:fixed md:w-full md:top-0 md:z-20 flex flex-row flex-wrap items-center bg-white p-6 border-b border-gray-300">

    <!-- logo -->
    <div class="flex-none w-56 flex flex-row items-center">
      <img src="${url_for('static', filename='dashboard/img/logo2.png')}" class="w-10 flex-none" alt="Logo">

      <strong class="capitalize ml-1 flex-1">PANEL DE CONTROL</strong>

      <button id="sliderBtn" class="flex-none text-right text-gray-900 hidden md:block">
        <i class="fad fa-list-ul"></i>
      </button>
    </div>
    <!-- end logo -->

    <!-- navbar content toggle -->
    <button id="navbarToggle" class="hidden md:block md:fixed right-0 mr-6">
      <i class="fad fa-chevron-double-down"></i>
    </button>
    <!-- end navbar content toggle -->

    <!-- navbar content -->
    <div id="navbar" class="animated md:hidden md:fixed md:top-0 md:w-full md:left-0 md:mt-16 md:border-t md:border-b md:border-gray-200 md:p-10 md:bg-white flex-1 pl-3 flex flex-row flex-wrap justify-between items-center md:flex-col md:items-center">
      <!-- left -->
      <div class="text-gray-600 md:w-full md:flex md:flex-row md:justify-evenly md:pb-10 md:mb-10 md:border-b md:border-gray-200">
        <a class="mr-2 transition duration-500 ease-in-out hover:text-gray-900" href="#" title="email"><i class="fad fa-envelope-open-text"></i></a>
        <a class="mr-2 transition duration-500 ease-in-out hover:text-gray-900" href="#" title="email"><i class="fad fa-comments-alt"></i></a>
        <a class="mr-2 transition duration-500 ease-in-out hover:text-gray-900" href="#" title="email"><i class="fad fa-check-circle"></i></a>
        <a class="mr-2 transition duration-500 ease-in-out hover:text-gray-900" href="#" title="email"><i class="fad fa-calendar-exclamation"></i></a>
      </div>
      <!-- end left -->

      <!-- right -->
      <div class="flex flex-row-reverse items-center">

        <!-- user -->
        <div class="dropdown relative md:static">

          <button class="menu-btn focus:outline-none focus:shadow-outline flex flex-wrap items-center">
            <div class="w-8 h-8 overflow-hidden rounded-full">
              <img src="${url_for('static', filename='dashboard/img/user1.jpg')}" class="w-10 flex-none" alt="Logo">

            </div>

            <div class="ml-2 capitalize flex ">
              <h1 class="text-sm text-gray-800 font-semibold m-0 p-0 leading-none">moeSaid</h1>
              <i class="fad fa-chevron-down ml-2 text-xs leading-none"></i>
            </div>
          </button>

          <button class="hidden fixed top-0 left-0 z-10 w-full h-full menu-overflow"></button>

          <div class="text-gray-500 menu hidden md:mt-10 md:w-full rounded bg-white shadow-md absolute z-20 right-0 w-40 mt-5 py-2 animated faster">

            <!-- item -->
            <a class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out" href="#">
              <i class="fad fa-user-edit text-xs mr-1"></i>
              edit my profile
            </a>
            <!-- end item -->

            <!-- item -->
            <a class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out" href="#">
              <i class="fad fa-inbox-in text-xs mr-1"></i>
              my inbox
            </a>
            <!-- end item -->

            <!-- item -->
            <a class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out" href="#">
              <i class="fad fa-badge-check text-xs mr-1"></i>
              tasks
            </a>
            <!-- end item -->

            <!-- item -->
            <a class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out" href="#">
              <i class="fad fa-comment-alt-dots text-xs mr-1"></i>
              chats
            </a>
            <!-- end item -->

            <hr>

            <!-- En tu archivo layout.html o el archivo HTML donde tengas el botÃ³n -->
            <form action="${ url_for('logout') }" method="get">
              <button type="submit" class="px-4 py-2 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 hover:text-gray-900 transition-all duration-300 ease-in-out">
                  <i class="fad fa-user-times text-xs mr-1"></i>
                  Log out
              </button>
            </form>


          </div>
        </div>
        <!-- end user -->

        <!-- notifcation -->
        <div class="dropdown relative mr-5 md:static">

          <button class="text-gray-500 menu-btn p-0 m-0 hover:text-gray-900 focus:text-gray-900 focus:outline-none transition-all ease-in-out duration-300">
            <i class="fad fa-bells"></i>
          </button>

          <button class="hidden fixed top-0 left-0 z-10 w-full h-full menu-overflow"></button>

          <div class="menu hidden rounded bg-white md:right-0 md:w-full shadow-md absolute z-20 right-0 w-84 mt-5 py-2 animated faster">
            <!-- top -->
            <div class="px-4 py-2 flex flex-row justify-between items-center capitalize font-semibold text-sm">
              <h1>notifications</h1>
              <div class="bg-teal-100 border border-teal-200 text-teal-500 text-xs rounded px-1">
                <strong>5</strong>
              </div>
            </div>
            <hr>
            <!-- end top -->

            <!-- body -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="px-3 py-2 rounded mr-3 bg-gray-100 border border-gray-300">
                <i class="fad fa-birthday-cake text-sm"></i>
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">poll..</h1>
                  <p class="text-xs text-gray-500">text here also</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>4 min ago</p>
                </div>
              </div>

            </a>
            <hr>
            <!-- end item -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="px-3 py-2 rounded mr-3 bg-gray-100 border border-gray-300">
                <i class="fad fa-user-circle text-sm"></i>
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">mohamed..</h1>
                  <p class="text-xs text-gray-500">text here also</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>78 min ago</p>
                </div>
              </div>

            </a>
            <hr>
            <!-- end item -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="px-3 py-2 rounded mr-3 bg-gray-100 border border-gray-300">
                <i class="fad fa-images text-sm"></i>
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">new imag..</h1>
                  <p class="text-xs text-gray-500">text here also</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>65 min ago</p>
                </div>
              </div>

            </a>
            <hr>
            <!-- end item -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="px-3 py-2 rounded mr-3 bg-gray-100 border border-gray-300">
                <i class="fad fa-alarm-exclamation text-sm"></i>
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">time is up..</h1>
                  <p class="text-xs text-gray-500">text here also</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>1 min ago</p>
                </div>
              </div>

            </a>
            <!-- end item -->


            <!-- end body -->

            <!-- bottom -->
            <hr>
            <div class="px-4 py-2 mt-2">
              <a href="#" class="border border-gray-300 block text-center text-xs uppercase rounded p-1 hover:text-teal-500 transition-all ease-in-out duration-500">
                view all
              </a>
            </div>
            <!-- end bottom -->
          </div>
        </div>
        <!-- end notifcation -->

        <!-- messages -->
        <div class="dropdown relative mr-5 md:static">

          <button class="text-gray-500 menu-btn p-0 m-0 hover:text-gray-900 focus:text-gray-900 focus:outline-none transition-all ease-in-out duration-300">
            <i class="fad fa-comments"></i>
          </button>

          <button class="hidden fixed top-0 left-0 z-10 w-full h-full menu-overflow"></button>

          <div class="menu hidden md:w-full md:right-0 rounded bg-white shadow-md absolute z-20 right-0 w-84 mt-5 py-2 animated faster">
            <!-- top -->
            <div class="px-4 py-2 flex flex-row justify-between items-center capitalize font-semibold text-sm">
              <h1>messages</h1>
              <div class="bg-teal-100 border border-teal-200 text-teal-500 text-xs rounded px-1">
                <strong>3</strong>
              </div>
            </div>
            <hr>
            <!-- end top -->

            <!-- body -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="w-10 h-10 rounded-full overflow-hidden mr-3 bg-gray-100 border border-gray-300">
                <img class="w-full h-full object-cover" src="img/user1.jpg" alt="">
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">mohamed said</h1>
                  <p class="text-xs text-gray-500">yeah i know</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>4 min ago</p>
                </div>
              </div>

            </a>
            <hr>
            <!-- end item -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="w-10 h-10 rounded-full overflow-hidden mr-3 bg-gray-100 border border-gray-300">
                <img class="w-full h-full object-cover" src="img/user2.jpg" alt="">
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">sull goldmen</h1>
                  <p class="text-xs text-gray-500">for sure</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>1 day ago</p>
                </div>
              </div>

            </a>
            <hr>
            <!-- end item -->

            <!-- item -->
            <a class="flex flex-row items-center justify-start px-4 py-4 block capitalize font-medium text-sm tracking-wide bg-white hover:bg-gray-200 transition-all duration-300 ease-in-out" href="#">

              <div class="w-10 h-10 rounded-full overflow-hidden mr-3 bg-gray-100 border border-gray-300">
                <img class="w-full h-full object-cover" src="img/user3.jpg" alt="">
              </div>

              <div class="flex-1 flex flex-rowbg-green-100">
                <div class="flex-1">
                  <h1 class="text-sm font-semibold">mick</h1>
                  <p class="text-xs text-gray-500">is typing ....</p>
                </div>
                <div class="text-right text-xs text-gray-500">
                  <p>31 feb</p>
                </div>
              </div>

            </a>
            <!-- end item -->


            <!-- end body -->

            <!-- bottom -->
            <hr>
            <div class="px-4 py-2 mt-2">
              <a href="#" class="border border-gray-300 block text-center text-xs uppercase rounded p-1 hover:text-teal-500 transition-all ease-in-out duration-500">
                view all
              </a>
            </div>
            <!-- end bottom -->
          </div>
        </div>
        <!-- end messages -->


      </div>
      <!-- end right -->
    </div>
    <!-- end navbar content -->

  </div>
<!-- end navbar -->


<!-- strat wrapper -->
<div class="h-screen flex flex-row flex-wrap">

    <!-- start sidebar -->
  <div id="sideBar" class="relative flex flex-col flex-wrap bg-white border-r border-gray-300 p-6 flex-none w-64 md:-ml-64 md:fixed md:top-0 md:z-30 md:h-screen md:shadow-xl animated faster">
    

    <!-- sidebar content -->
    <div class="flex flex-col">

      <!-- sidebar toggle -->
      <div class="text-right hidden md:block mb-4">
        <button id="sideBarHideBtn">
          <i class="fad fa-times-circle"></i>
        </button>
      </div>
      <!-- end sidebar toggle -->

      <p class="uppercase text-xs text-gray-600 mb-4 tracking-wider">homes</p>

      <a href="${url_for('dashboard.index')}" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
        <i class="fad fa-chart-pie text-xs mr-2"></i>
        Analytics dashboard
    </a>
  

    <!-- link -->
    <a href="{{ url_for('dashboard.dashboard2') }}" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
      <i class="fad fa-shopping-cart text-xs mr-2"></i>
      ecommerce dashboard
    </a>
    <!-- end link -->

      <p class="uppercase text-xs text-gray-600 mb-4 mt-4 tracking-wider">apps</p>

      <!-- link -->
      <a href="${url_for('dashboard.list_user')}" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
        <i class="fad fa-user-circle text-xs mr-2"></i>
        USUARIOS
      </a>
      <!-- end link -->

      <!-- link -->
      <a href="${url_for('dashboard.list_articles')}" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
        <i class="fad fa-comments text-xs mr-2"></i>
        NOTICIAS
    </a>
      <!-- end link -->
  
      
      
      

    </div>
    <!-- end sidebar content -->

  </div>
  <!-- end sidbar -->

  <!-- strat content -->
  <div class="bg-gray-100 flex-1 p-6 md:mt-16">

    <!-- congrats & summary -->
    <div class="grid grid-cols-3 lg:grid-cols-1 gap-5">
      <!-- congrats -->
<div class="card col-span-1">

    <div class="card-body h-full flex flex-col justify-between">
      <!-- SecciÃ³n del grÃ¡fico -->
      
      <ul id="websiteList" data-websites="${websites}" data-counts="${website_article_counts}">
            <div class=" flex flex-col">
                <h2 class="text-xl font-semibold">Noticias en cada diario</h2>
                <div id="trafficSourcesChart" class="w-full h-64"></div>
            </div>
        
            <canvas id="websiteChart" width="400" height="200"></canvas>


    </div>
    



    <div id="articleData" 
        data-dates="${all_dates_str}" 
        data-counts="${all_counts_str}">
    </div>


    <div class="card-body h-full flex flex-col justify-between">
      <!-- SecciÃ³n del grÃ¡fico -->
      

            <div class=" flex flex-col">
                <h2 class="text-xl font-semibold">Noticias cada dia</h2>
                <div id="trafficSourcesChart" class="w-full h-64"></div>
            </div>
        
            <canvas id="chLine"></canvas>


        

    </div>
    

    

  </div>



<!-- end congrats -->
      <div class="card p-0 overflow-hidden col-span-2 lg:col-span-1 flex flex-row lg:flex-col">
     
    <!-- right -->
    <div class="border-r border-gray-200 w-2/3 lg:w-full lg:mb-5">
        
      
      
    
    

    
    <!-- end right -->
    <div id="categoryData" 
        data-categories="${categories}" 
        data-counts="${counts}">
    </div>

    <div style="width: 500px">
        <canvas id="grafica"></canvas>
    </div>

  </div>
  <div>
    
    <!-- HTML -->
<div class="total-articles-container">
  <p>Total de artÃ­culos:</p>
  <br>
  <span id="totalArticlesCount" class="counter">${total_articles_count}</span>
</div>
<br>
<div class="total-articles-container">
  <p>ArtÃ­culos publicados hoy:</p>
  <br>
  <span id="totalArticlesCount" class="counter">${articles_today_count}</span>
</div>

<!-- CSS -->
<style>
  .total-articles-container {
      display: flex;
      align-items: center;
      font-family: Arial, sans-serif;
  }

  .total-articles-container p {
      font-size: 1.5em;
      color: #555;
      margin-right: 10px;
  }

  .counter {
      font-size: 2.5em;
      color: #ff6347; /* Color rojo anaranjado */
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      background: #f1c40f;
      padding: 10px 20px;
      border-radius: 10px;
      animation: pulse 1s infinite;
  }

  /* AnimaciÃ³n de pulso */
  @keyframes pulse {
      0%, 100% {
          transform: scale(1);
      }
      50% {
          transform: scale(1.1);
      }
  }
</style>

  </div>
    

</div>



    </div>
    <!-- end congrats & summary -->

    
<!-- congrats & summary -->
<div class="grid grid-cols-3 lg:grid-cols-1 gap-5">
  <!-- congrats -->
<div class="card col-span-1">

<div class="card-body h-full flex flex-col justify-between">
  <!-- SecciÃ³n del grÃ¡fico -->
  
  
        <div class=" flex flex-col">
            <h2 class="text-xl font-semibold">Noticias por meses en cada diario</h2>
            <div id="trafficSourcesChart" class="w-full h-64"></div>
        </div>
    
        <!-- Canvas para el grÃ¡fico de radar -->
        <div style="width: 300px;">
          <div id="radarData" data-websites="{{ websites_json }}" data-datasets="{{ datasets_json }}"></div>
            <canvas id="grafica2"></canvas>

        </div>


        

</div>







<div class="card-body h-full flex flex-col justify-between">
  <!-- SecciÃ³n del grÃ¡fico -->
  

        <div class=" flex flex-col">
            <h2 class="text-xl font-semibold">Noticias cada dia</h2>
            <div id="trafficSourcesChart" class="w-full h-64"></div>
        </div>
    
        


    

</div>




</div>


    <!-- end congrats -->
    <div class="card p-0 overflow-hidden col-span-2 lg:col-span-1  lg:flex-col">
     
      
          
        <div><h2>Nube de Palabras de los TÃ­tulos</h2></div>
        <div>
          <img src="data:image/png;base64,${img_base64}" alt="Nube de Palabras">
        </div>
        

      
  
    
      
  
  </div>
  
  
  
      </div>
      <!-- end congrats & summary -->


    <!-- best seller & traffic -->
    <div class="grid grid-cols-2 lg:grid-cols-1 gap-5 mt-5">
      <div class="card">

    <div class="card-body">
        
      
    
    </div>
    <!-- end best seller & traffic -->


  </div>
  <!-- end content -->

</div>
<!-- end wrapper -->



<script>
  // Obtener los datos desde los atributos data- del elemento
  var websites = document.getElementById('websiteList').getAttribute('data-websites').replace(/[\[\]'"]/g, '').split(',');
  var websiteArticleCounts = document.getElementById('websiteList').getAttribute('data-counts').replace(/[\[\]'"]/g, '').split(',').map(Number); // Convertir a nÃºmeros

  // Verifica los valores de los arreglos en la consola
  console.log("Sitios web:", websites);
  console.log("Conteo de artÃ­culos:", websiteArticleCounts);

  // Crear el grÃ¡fico de barras
  var ctx = document.getElementById('websiteChart').getContext('2d');
  var websiteChart = new Chart(ctx, {
      type: 'bar',  // Cambiamos el tipo a "bar" para el grÃ¡fico de barras
      data: {
          labels: websites, // Los nombres de los sitios web como etiquetas
          datasets: [{
              label: 'Cantidad de artÃ­culos',
              data: websiteArticleCounts, // Los conteos de artÃ­culos
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                  'rgba(255, 159, 64, 0.2)'
              ],
              borderColor: [
                  'rgba(255, 99, 132, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 192, 192, 1)',
                  'rgba(153, 102, 255, 1)',
                  'rgba(255, 159, 64, 1)'
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });
</script>


<script>

  // Obtener los datos desde los atributos `data-` del elemento
  var dates = document.getElementById('articleData').getAttribute('data-dates').split(',');
  var counts = document.getElementById('articleData').getAttribute('data-counts').split(',').map(Number);

  // Verifica los valores de los arreglos en la consola
  console.log("Fechas:", dates);
  console.log("Conteos:", counts);


  // Crear el grÃ¡fico de lÃ­neas
  var ctx = document.getElementById('chLine').getContext('2d');
  var chLine = new Chart(ctx, {
      type: 'line',
      data: {
          labels: dates, // Las fechas como etiquetas en el eje X
          datasets: [{
              label: 'Cantidad de artÃ­culos',
              data: counts, // Los conteos de artÃ­culos
              backgroundColor: 'rgba(0, 123, 255, 0.2)',
              borderColor: '#007bff',
              borderWidth: 2,
              pointBackgroundColor: '#007bff',
              pointRadius: 4,
              pointHoverRadius: 6,
              fill: true
          }]
      },
      options: {
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'Fecha'
                  },
                  ticks: {
                      maxRotation: 90,
                      minRotation: 45
                  }
              },
              y: {
                  beginAtZero: true,
                  title: {
                      display: true,
                      text: 'Cantidad de ArtÃ­culos'
                  }
              }
          },
          plugins: {
              legend: {
                  display: true,
                  position: 'top'
              }
          },
          responsive: true
      }
  });
</script>

<script>
  // GrÃ¡fico de pastel
  // Obtener los datos desde los atributos `data-` del elemento
  var categories = document.getElementById('categoryData').getAttribute('data-categories').replace(/[\[\]'"]/g, '').split(',');
  var counts = document.getElementById('categoryData').getAttribute('data-counts').replace(/[\[\]'"]/g, '').split(',').map(Number); // Convertir a nÃºmeros

  // Verifica los valores de los arreglos en la consola
  console.log("CategorÃ­as:", categories);
  console.log("Conteos:", counts);

  // Colores para el grÃ¡fico
  const colorsPie = ['rgb(69,177,223)', 'rgb(99,201,122)', 'rgb(203,82,82)', 'rgb(229,224,88)', 'rgb(148,112,202)', 'rgb(255,167,64)'];

  // ConfiguraciÃ³n del grÃ¡fico de pastel
  const dataPie = {
      labels: categories,
      datasets: [{
          data: counts,
          backgroundColor: colorsPie.slice(0, categories.length)  // Usa tantos colores como categorÃ­as haya
      }]
  };

  const configPie = {
      type: 'pie',
      data: dataPie,
      options: {
          responsive: true,
          plugins: {
              legend: {
                  position: 'top',
              },
          }
      }
  };

  // Crear el grÃ¡fico de pastel
  const graphPie = document.getElementById("grafica");
  new Chart(graphPie, configPie);
</script>


<script>
  // Obtener los datos pasados desde Flask en formato JSON
  const labels = ${labels_json | n};  // `| n` asegura que se manejen como JSON en Mako
  const datasets = ${radar_datasets_json | n};

  // ConfiguraciÃ³n del grÃ¡fico de radar
  const data = {
      labels: labels,
      datasets: datasets
  };

  const config = {
      type: 'radar',
      data: data,
      options: {
          responsive: true,
          plugins: {
              legend: {
                  position: 'top',
              },
          },
          scales: {
              r: {
                  angleLines: {
                      display: false
                  },
                  suggestedMin: 0,
                  suggestedMax: 100  // Ajusta segÃºn los valores esperados
              }
          }
      }
  };

  // Crear el grÃ¡fico de radar
  const graph = document.getElementById("grafica2");
  new Chart(graph, config);
</script>




<!-- Bootstrap JS (opcional, para funcionalidades adicionales de Bootstrap) -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


<!-- script -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script src="${static_url('dashboard/js/scripts.js') }"></script>
<!-- end script -->

</body>
</html>

